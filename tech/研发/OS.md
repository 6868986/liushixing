### 什么是OS

操作系统：管理计算机的硬件资源和软件资源的程序；使硬件资源对于用户应用程序而言不可见，用户需要时向操作系统申请获取；操作系统的内核负责进程、文件、设备以及内存的管理。

操作系统中的思想：

***页缓存技术与MySQL中的bufferpool、CPU Cache相对于内存 与 Redis相对于MySQL、内存管理中的快表与Redis***

用户态：用户态运行的进程只能读取用户程序数据，需要计算机资源的话需要向操作系统申请

内核态：内核态运行的程序可以操作计算机的任何资源，包括文件、CPU、内存

### 进程、线程、协程

- 进程是程序的一次执行过程

  文件系统中的代码  运行可执行文件  加载到内存  CPU执行程序

- #### 进程状态

  创建进程

  就绪挂起

  阻塞挂起

  结束进程

  - 挂起是因为将进程从物理内存换出到外存中，需要再次运行的时候就再进入物理内存
  - 虚拟内存 => 页表 => 物理内存 => 磁盘

- #### 进程控制块PCB

  - PCB包含的信息

  - PCB的组织

    将有相同状态的进程链成链表，组成各种队列       就绪队列、阻塞队列

  - CPU上下文切换

    CPU寄存器 + 程序计数器

  - 进程上下文切换

    进程上下文信息保存在PCB中

- 线程是进程中的一条执行流程

  并行 + 共享地址空间（虚拟地址空间）、文件、数据、代码等资源

  仅独享一些必备的资源：寄存器+栈

- **进程线程的区别**

  调度、资源

  上下文切换

  系统开销

- 协程运行在线程之上

- #### 进程通信

  每个进程的用户空间互相独立，但内核空间是共享的，所以进程间通信依赖内核空间

  1. 管道

     效率低，不适合频繁交换数据

     匿名管道  适用于父子进程、兄弟进程  文件描述符f[0]读   f[1]写

     命名管道FIFO  不相关的进程间也能相互通信  创建了管道这一设备文件

  2. 消息队列

     封装成消息（体）

     不适合大数据传输

     用户态与内核态之间存在数据拷贝的开销（读取和写入）

  3. 共享内存

     拿出一块虚拟空间，映射到一块相同的物理内存中

  4. 信号

  5. 信号量

     对共享资源（共享内存）的同步与互斥

     信号量 => 整型计数器  表示共享资源的数量

     互斥信号量 = 1

     同步信号量 = 0

  6. Socket

     跨网络进程通信，与其他主机上的进程
  
  #### 线程通信
  
  1. 互斥量：Java中的锁
  2. 信号量：允许访问共享资源的最大线程数 
  3. 事件Event：wait()、notify()

#### select、poll、epoll

### 内存管理

1. 内存管理是干啥的

   内存空间的分配和回收（malloc()函数、free()函数） && 逻辑地址到物理地址的转换

2. 内存空间 => 非

2. 连续分配管理方式：页式管理&段式

   => 段页式管理机制：段与段、段内部都是离散的

3. 分页和分段的异同点

4. 快表、多级页表

5. 
